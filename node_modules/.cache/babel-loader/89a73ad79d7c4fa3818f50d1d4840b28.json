{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { reactive } from 'vue';\nimport { ElTabs, ElTabPane, ElForm, ElFormItem, ElInput, ElButton, ElCard, ElMessage } from 'element-plus';\nexport default {\n  name: 'PersonalCenter',\n  components: {\n    ElTabs,\n    ElTabPane,\n    ElForm,\n    ElFormItem,\n    ElInput,\n    ElButton,\n    ElCard\n  },\n\n  setup() {\n    const username = 'binjie09'; // 用户名\n\n    const activeTab = 'basic-info'; // 当前激活的标签页\n    // 用户信息表单数据和校验规则\n\n    const userInfo = reactive({\n      username: 'binjie09',\n      email: 'binjie09@example.com',\n      phone: '15800000000'\n    });\n    const rules = {\n      email: [{\n        required: true,\n        message: '请输入邮箱',\n        trigger: 'blur'\n      }, {\n        type: 'email',\n        message: '请输入正确的邮箱地址',\n        trigger: ['blur', 'change']\n      }],\n      phone: [{\n        required: true,\n        message: '请输入手机号',\n        trigger: 'blur'\n      }, {\n        pattern: /^1\\d{10}$/,\n        message: '请输入正确的手机号',\n        trigger: ['blur', 'change']\n      }]\n    }; // 修改密码表单数据和校验规则\n\n    const passwordForm = reactive({\n      oldPassword: '',\n      newPassword: '',\n      confirmPassword: ''\n    });\n    const passwordRules = {\n      oldPassword: [{\n        required: true,\n        message: '请输入旧密码',\n        trigger: 'blur'\n      }],\n      newPassword: [{\n        required: true,\n        message: '请输入新密码',\n        trigger: 'blur'\n      }, {\n        min: 6,\n        max: 20,\n        message: '密码长度为6-20个字符',\n        trigger: 'blur'\n      }],\n      confirmPassword: [{\n        required: true,\n        message: '请确认新密码',\n        trigger: 'blur'\n      }, {\n        validator: (rule, value, callback) => {\n          if (value !== passwordForm.newPassword) {\n            callback(new Error('两次密码输入不一致'));\n          } else {\n            callback();\n          }\n        },\n        trigger: 'blur'\n      }]\n    }; // 更新用户信息方法\n\n    const updateUserInfo = () => {\n      const form = refs.userInfoForm;\n      console.log(refs);\n      form.validate(async valid => {\n        if (valid) {\n          try {\n            // 发送修改请求\n            console.log(userInfo);\n            ElMessage.success('修改成功');\n          } catch (error) {\n            ElMessage.error('修改失败：' + error.message);\n          }\n        }\n      });\n    }; // 修改密码方法\n\n\n    const changePassword = () => {\n      const form = refs.passwordForm;\n      form.validate(async valid => {\n        if (valid) {\n          try {\n            // 发送修改请求\n            console.log(passwordForm);\n            ElMessage.success('修改成功');\n          } catch (error) {\n            ElMessage.error('修改失败：' + error.message);\n          }\n        }\n      });\n    };\n\n    return {\n      username,\n      activeTab,\n      userInfo,\n      rules,\n      passwordForm,\n      passwordRules,\n      updateUserInfo,\n      changePassword\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["reactive","ElTabs","ElTabPane","ElForm","ElFormItem","ElInput","ElButton","ElCard","ElMessage","name","components","setup","username","activeTab","userInfo","email","phone","rules","required","message","trigger","type","pattern","passwordForm","oldPassword","newPassword","confirmPassword","passwordRules","min","max","validator","rule","value","callback","Error","updateUserInfo","form","refs","userInfoForm","console","log","validate","valid","success","error","changePassword"],"sourceRoot":"","sources":["D:\\Dev\\Front\\demo01\\src\\views\\User\\personal.vue"],"sourcesContent":["<template>\r\n    <div class=\"personal-center\">\r\n      <el-card shadow=\"hover\">\r\n        <div slot=\"header\" class=\"card-header\">\r\n          <h3>{{ username }} 的个人中心</h3>\r\n        </div>\r\n        <div class=\"card-content\">\r\n          <el-tabs v-model=\"activeTab\" type=\"border-card\">\r\n            <el-tab-pane label=\"基本信息\" name=\"basic-info\">\r\n              <el-form :model=\"userInfo\" :rules=\"rules\" ref=\"userInfoForm\" label-width=\"120px\">\r\n                <el-form-item label=\"用户名\" prop=\"username\">\r\n                  <el-input v-model=\"userInfo.username\" disabled></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"邮箱\" prop=\"email\">\r\n                  <el-input v-model=\"userInfo.email\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"手机号\" prop=\"phone\">\r\n                  <el-input v-model=\"userInfo.phone\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                  <el-button type=\"primary\" @click=\"updateUserInfo\">保存</el-button>\r\n                </el-form-item>\r\n              </el-form>\r\n            </el-tab-pane>\r\n            <el-tab-pane label=\"修改密码\" name=\"change-password\">\r\n              <el-form :model=\"passwordForm\" :rules=\"passwordRules\" ref=\"passwordForm\" label-width=\"120px\">\r\n                <el-form-item label=\"旧密码\" prop=\"oldPassword\">\r\n                  <el-input type=\"password\" v-model=\"passwordForm.oldPassword\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"新密码\" prop=\"newPassword\">\r\n                  <el-input type=\"password\" v-model=\"passwordForm.newPassword\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\r\n                  <el-input type=\"password\" v-model=\"passwordForm.confirmPassword\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                  <el-button type=\"primary\" @click=\"changePassword\">修改密码</el-button>\r\n                </el-form-item>\r\n              </el-form>\r\n            </el-tab-pane>\r\n          </el-tabs>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { reactive } from 'vue'\r\n  import { ElTabs, ElTabPane, ElForm, ElFormItem, ElInput, ElButton, ElCard, ElMessage } from 'element-plus'\r\n  \r\n  export default {\r\n    name: 'PersonalCenter',\r\n    components: {\r\n      ElTabs,\r\n      ElTabPane,\r\n      ElForm,\r\n      ElFormItem,\r\n      ElInput,\r\n      ElButton,\r\n      ElCard\r\n    },\r\n    setup() {\r\n      const username = 'binjie09' // 用户名\r\n      const activeTab = 'basic-info' // 当前激活的标签页\r\n  \r\n      // 用户信息表单数据和校验规则\r\n      const userInfo = reactive({\r\n        username: 'binjie09',\r\n        email: 'binjie09@example.com',\r\n        phone: '15800000000'\r\n      })\r\n      const rules = {\r\n        email: [\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n          { type: 'email', message: '请输入正确的邮箱地址', trigger: ['blur', 'change'] }\r\n        ],\r\n        phone: [\r\n          { required: true, message: '请输入手机号', trigger: 'blur' },\r\n          { pattern: /^1\\d{10}$/, message: '请输入正确的手机号', trigger: ['blur', 'change'] }\r\n        ]\r\n      }\r\n  \r\n      // 修改密码表单数据和校验规则\r\n      const passwordForm = reactive({\r\n        oldPassword: '',\r\n        newPassword: '',\r\n        confirmPassword: ''\r\n      })\r\n      const passwordRules = {\r\n        oldPassword: [\r\n          { required: true, message: '请输入旧密码', trigger: 'blur' }\r\n        ],\r\n        newPassword: [\r\n          { required: true, message: '请输入新密码', trigger: 'blur' },\r\n          { min: 6, max: 20, message: '密码长度为6-20个字符', trigger: 'blur' }\r\n        ],\r\n        confirmPassword: [\r\n          { required: true, message: '请确认新密码', trigger: 'blur' },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              if (value !== passwordForm.newPassword) {\r\n                callback(new Error('两次密码输入不一致'))\r\n              } else {\r\n                callback()\r\n              }\r\n            },\r\n            trigger: 'blur'\r\n          }\r\n        ]\r\n      }\r\n  \r\n      // 更新用户信息方法\r\n      const updateUserInfo = () => {\r\n        const form = refs.userInfoForm\r\n        console.log(refs)\r\n        form.validate(async valid => {\r\n          if (valid) {\r\n            try {\r\n              // 发送修改请求\r\n              console.log(userInfo)\r\n              ElMessage.success('修改成功')\r\n            } catch (error) {\r\n              ElMessage.error('修改失败：' + error.message)\r\n            }\r\n          }\r\n        })\r\n      }\r\n  \r\n      // 修改密码方法\r\n      const changePassword = () => {\r\n        const form = refs.passwordForm\r\n        form.validate(async valid => {\r\n          if (valid) {\r\n            try {\r\n              // 发送修改请求\r\n              console.log(passwordForm)\r\n              ElMessage.success('修改成功')\r\n            } catch (error) {\r\n              ElMessage.error('修改失败：' + error.message)\r\n            }\r\n          }\r\n        })\r\n      }\r\n  \r\n      return {\r\n        username,\r\n        activeTab,\r\n        userInfo,\r\n        rules,\r\n        passwordForm,\r\n        passwordRules,\r\n        updateUserInfo,\r\n        changePassword\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .personal-center {\r\n    margin: 20px auto;\r\n    max-width: 800px;\r\n  }\r\n  \r\n  .card-header {\r\n    background-color: #f5f7fa;\r\n    padding: 12px 20px;\r\n  }\r\n  \r\n  .card-content {\r\n    padding: 20px;\r\n  }\r\n  </style>\r\n  "]},"metadata":{},"sourceType":"module"}