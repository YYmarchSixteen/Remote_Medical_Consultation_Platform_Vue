{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6810563a\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"info-card\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  slot: \"header\"\n}, \"个人信息\", -1\n/* HOISTED */\n));\n\nconst _hoisted_4 = {\n  class: \"content\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"保存\");\n\nconst _hoisted_6 = {\n  class: \"favorites\"\n};\n\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  slot: \"header\"\n}, \"收藏夹\", -1\n/* HOISTED */\n));\n\nconst _hoisted_8 = {\n  class: \"content\"\n};\nconst _hoisted_9 = {\n  class: \"image\"\n};\nconst _hoisted_10 = [\"src\"];\nconst _hoisted_11 = {\n  class: \"name\"\n};\nconst _hoisted_12 = {\n  class: \"price\"\n};\nconst _hoisted_13 = {\n  class: \"actions\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\"删除\");\n\nconst _hoisted_15 = /*#__PURE__*/_createTextVNode(\"立即购买\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  const _component_el_card = _resolveComponent(\"el-card\");\n\n  const _component_el_col = _resolveComponent(\"el-col\");\n\n  const _component_el_row = _resolveComponent(\"el-row\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_card, null, {\n    default: _withCtx(() => [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_form, {\n      model: $setup.form,\n      \"label-position\": \"left\",\n      \"label-width\": \"100px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"用户名\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.form.username,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.username = $event),\n          disabled: \"\"\n        }, null, 8\n        /* PROPS */\n        , [\"modelValue\"])]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_form_item, {\n        label: \"密码\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.form.password,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.password = $event)\n        }, null, 8\n        /* PROPS */\n        , [\"modelValue\"])]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_form_item, {\n        label: \"昵称\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.form.nickname,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.nickname = $event)\n        }, null, 8\n        /* PROPS */\n        , [\"modelValue\"])]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_form_item, {\n        label: \"联系电话\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.form.phone,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.form.phone = $event)\n        }, null, 8\n        /* PROPS */\n        , [\"modelValue\"])]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_form_item, {\n        label: \"电子邮件\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.form.email,\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.form.email = $event)\n        }, null, 8\n        /* PROPS */\n        , [\"modelValue\"])]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_form_item, null, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: $setup.updateInfo\n        }, {\n          default: _withCtx(() => [_hoisted_5]),\n          _: 1\n          /* STABLE */\n\n        }, 8\n        /* PROPS */\n        , [\"onClick\"])]),\n        _: 1\n        /* STABLE */\n\n      })]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"model\"])])]),\n    _: 1\n    /* STABLE */\n\n  })]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_card, null, {\n    default: _withCtx(() => [_hoisted_7, _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_row, {\n      gutter: 20\n    }, {\n      default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.favorites, item => {\n        return _openBlock(), _createBlock(_component_el_col, {\n          key: item.id,\n          span: 8\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_card, {\n            shadow: \"hover\"\n          }, {\n            default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"img\", {\n              src: item.image,\n              alt: \"\"\n            }, null, 8\n            /* PROPS */\n            , _hoisted_10)]), _createElementVNode(\"div\", _hoisted_11, _toDisplayString(item.name), 1\n            /* TEXT */\n            ), _createElementVNode(\"div\", _hoisted_12, \"￥\" + _toDisplayString(item.price), 1\n            /* TEXT */\n            ), _createElementVNode(\"div\", _hoisted_13, [_createVNode(_component_el_button, {\n              type: \"text\",\n              size: \"small\",\n              onClick: $event => $setup.deleteFavorite(item)\n            }, {\n              default: _withCtx(() => [_hoisted_14]),\n              _: 2\n              /* DYNAMIC */\n\n            }, 1032\n            /* PROPS, DYNAMIC_SLOTS */\n            , [\"onClick\"]), _createVNode(_component_el_button, {\n              type: \"primary\",\n              size: \"small\"\n            }, {\n              default: _withCtx(() => [_hoisted_15]),\n              _: 1\n              /* STABLE */\n\n            })])]),\n            _: 2\n            /* DYNAMIC */\n\n          }, 1024\n          /* DYNAMIC_SLOTS */\n          )]),\n          _: 2\n          /* DYNAMIC */\n\n        }, 1024\n        /* DYNAMIC_SLOTS */\n        );\n      }), 128\n      /* KEYED_FRAGMENT */\n      ))]),\n      _: 1\n      /* STABLE */\n\n    })])]),\n    _: 1\n    /* STABLE */\n\n  })])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","slot","_createElementBlock","_createVNode","_component_el_card","_hoisted_3","_component_el_form","model","$setup","_component_el_form_item","label","_component_el_input","username","$event","disabled","password","nickname","phone","email","_component_el_button","type","onClick","_hoisted_7","_component_el_row","gutter","_Fragment","_renderList","item","_createBlock","_component_el_col","key","id","span","shadow","src","image","alt","_toDisplayString","name","price","size"],"sourceRoot":"","sources":["D:\\Dev\\Front\\demo01\\src\\views\\User\\personal.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"info-card\">\r\n      <el-card>\r\n        <div slot=\"header\">个人信息</div>\r\n        <div class=\"content\">\r\n          <el-form :model=\"form\" label-position=\"left\" label-width=\"100px\">\r\n            <el-form-item label=\"用户名\">\r\n              <el-input v-model=\"form.username\" disabled></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"密码\">\r\n              <el-input v-model=\"form.password\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"昵称\">\r\n              <el-input v-model=\"form.nickname\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"联系电话\">\r\n              <el-input v-model=\"form.phone\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"电子邮件\">\r\n              <el-input v-model=\"form.email\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"updateInfo\">保存</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n\r\n\r\n\r\n    <div class=\"favorites\">\r\n      <el-card>\r\n        <div slot=\"header\">收藏夹</div>\r\n        <div class=\"content\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col v-for=\"item in favorites\" :key=\"item.id\" :span=\"8\">\r\n              <el-card shadow=\"hover\">\r\n                <div class=\"image\">\r\n                  <img :src=\"item.image\" alt=\"\">\r\n                </div>\r\n                <div class=\"name\">{{ item.name }}</div>\r\n                <div class=\"price\">￥{{ item.price }}</div>\r\n                <div class=\"actions\">\r\n                  <el-button type=\"text\" size=\"small\" @click=\"deleteFavorite(item)\">删除</el-button>\r\n                  <el-button type=\"primary\" size=\"small\">立即购买</el-button>\r\n                </div>\r\n              </el-card>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { reactive, onMounted } from 'vue';\r\nimport { ElButton, ElCol, ElForm, ElFormItem, ElInput, ElRow, ElTable, ElTableColumn, ElCard } from 'element-plus';\r\n\r\nexport default {\r\n  components: {\r\n    ElButton,\r\n    ElCol,\r\n    ElForm,\r\n    ElFormItem,\r\n    ElInput,\r\n    ElRow,\r\n    ElTable,\r\n    ElTableColumn,\r\n    ElCard\r\n  },\r\n  setup() {\r\n    const form = reactive({\r\n      username: '',\r\n      password: '',\r\n      nickname: '',\r\n      phone: '',\r\n      email: ''\r\n    });\r\n\r\n    const orders = reactive([]);\r\n    const favorites = reactive([]);\r\n\r\n    const getInfo = async () => {\r\n      try {\r\n        const response = await axios.get('/api/user/info');\r\n        const { username, nickname, phone, email } = response.data;\r\n        form.username = username;\r\n        form.nickname = nickname;\r\n        form.phone = phone;\r\n        form.email = email;\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    const getOrders = async () => {\r\n      try {\r\n        const response = await axios.get('/api/user/orders');\r\n        orders.splice(0, orders.length, ...response.data);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    const getFavorites = async () => {\r\n      try {\r\n        const response = await axios.get('/api/user/favorites');\r\n        favorites.splice(0, favorites.length, ...response.data);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    const updateInfo = async () => {\r\n      try {\r\n        await axios.put('/api/user/info', form);\r\n        alert('个人信息已更新！');\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    const deleteFavorite = async (item) => {\r\n      try {\r\n        const response = await axios.delete(`/api/user/favorites/${item.id}`);\r\n        if (response.status === 200) {\r\n          favorites.splice(favorites.indexOf(item), 1);\r\n          alert('删除成功！');\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    onMounted(() => {\r\n      getInfo();\r\n      getOrders();\r\n      getFavorites();\r\n    });\r\n\r\n    return {\r\n      form,\r\n      orders,\r\n      favorites,\r\n      updateInfo,\r\n      deleteFavorite\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.info-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.order-history {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.el-table__body-wrapper {\r\n  overflow-x: auto;\r\n}\r\n\r\n.favorites .image {\r\n  margin-bottom: 10px;\r\n  text-align: center;\r\n}\r\n\r\n.favorites .name {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.favorites .price {\r\n  font-size: 16px;\r\n  color: #ff0000;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.favorites .actions {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}