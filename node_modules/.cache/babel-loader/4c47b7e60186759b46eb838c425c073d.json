{"ast":null,"code":"import axios from 'axios';\nimport { reactive, onMounted } from 'vue';\nimport { ElForm, ElFormItem, ElInput, ElCard } from 'element-plus';\nimport { message } from 'element-plus';\nimport Header from '../userLayout/Header/header.vue';\nexport default {\n  components: {\n    ElForm,\n    ElFormItem,\n    ElInput,\n    ElCard,\n    Header\n  },\n\n  setup() {\n    const form = reactive({\n      username: '',\n      password: '',\n      telephone: '',\n      address: ''\n    });\n    const favorites = reactive([]);\n\n    const getInfo = async () => {\n      try {\n        const response = await axios.get('http://localhost:8080/userInfo', {\n          params: {\n            username: sessionStorage.getItem('username')\n          }\n        });\n        const {\n          username,\n          telephone,\n          address\n        } = response.data;\n        form.username = username;\n        form.telephone = telephone;\n        form.address = address;\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    const updateInfo = async () => {\n      try {\n        await axios.get('http://localhost:8080/updateUserInfo', {\n          params: {\n            username: form.username,\n            password: form.password,\n            telephone: form.telephone,\n            address: form.address,\n            id: sessionStorage.getItem('userid')\n          }\n        });\n        alert('个人信息已更新！');\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    onMounted(() => {\n      getInfo();\n    });\n    return {\n      form,\n      favorites,\n      updateInfo\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAiCA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,KAApC;AACA,SAASC,MAAT,EAAiBC,UAAjB,EAA6BC,OAA7B,EAAsCC,MAAtC,QAAoD,cAApD;AACA,SAASC,OAAT,QAAwB,cAAxB;AACA,OAAOC,MAAP,MAAmB,iCAAnB;AAEA,eAAe;AACbC,YAAU,EAAE;AACVN,UADU;AAEVC,cAFU;AAGVC,WAHU;AAIVC,UAJU;AAKVE;AALU,GADC;;AAQbE,OAAK,GAAG;AACN,UAAMC,IAAG,GAAIV,QAAQ,CAAC;AACpBW,cAAQ,EAAE,EADU;AAEpBC,cAAQ,EAAE,EAFU;AAGpBC,eAAS,EAAE,EAHS;AAIpBC,aAAO,EAAE;AAJW,KAAD,CAArB;AAOA,UAAMC,SAAQ,GAAIf,QAAQ,CAAC,EAAD,CAA1B;;AAEA,UAAMgB,OAAM,GAAI,YAAY;AAC1B,UAAI;AACF,cAAMC,QAAO,GAAI,MAAMlB,KAAK,CAACmB,GAAN,CAAU,gCAAV,EACrB;AACEC,gBAAM,EAAE;AACNR,oBAAQ,EAAES,cAAc,CAACC,OAAf,CAAuB,UAAvB;AADJ;AADV,SADqB,CAAvB;AAOA,cAAM;AAAEV,kBAAF;AAAYE,mBAAZ;AAAuBC;AAAvB,YAAmCG,QAAQ,CAACK,IAAlD;AACAZ,YAAI,CAACC,QAAL,GAAgBA,QAAhB;AACAD,YAAI,CAACG,SAAL,GAAiBA,SAAjB;AACAH,YAAI,CAACI,OAAL,GAAeA,OAAf;AACF,OAZA,CAYE,OAAOS,KAAP,EAAc;AACdC,eAAO,CAACD,KAAR,CAAcA,KAAd;AACF;AACD,KAhBD;;AAoBA,UAAME,UAAS,GAAI,YAAY;AAC7B,UAAI;AACF,cAAM1B,KAAK,CAACmB,GAAN,CAAU,sCAAV,EACJ;AACEC,gBAAM,EAAE;AACNR,oBAAQ,EAACD,IAAI,CAACC,QADR;AAENC,oBAAQ,EAACF,IAAI,CAACE,QAFR;AAGNC,qBAAS,EAACH,IAAI,CAACG,SAHT;AAINC,mBAAO,EAACJ,IAAI,CAACI,OAJP;AAKNY,cAAE,EAAEN,cAAc,CAACC,OAAf,CAAuB,QAAvB;AALE;AADV,SADI,CAAN;AAUEM,aAAK,CAAC,UAAD,CAAL;AACJ,OAZA,CAYE,OAAOJ,KAAP,EAAc;AACdC,eAAO,CAACD,KAAR,CAAcA,KAAd;AACF;AACD,KAhBD;;AAkBAtB,aAAS,CAAC,MAAM;AACde,aAAO;AACR,KAFQ,CAAT;AAIA,WAAO;AACLN,UADK;AAELK,eAFK;AAGLU;AAHK,KAAP;AAKF;;AAjEa,CAAf","names":["axios","reactive","onMounted","ElForm","ElFormItem","ElInput","ElCard","message","Header","components","setup","form","username","password","telephone","address","favorites","getInfo","response","get","params","sessionStorage","getItem","data","error","console","updateInfo","id","alert"],"sourceRoot":"","sources":["D:\\Dev\\Front\\demo01\\src\\views\\User\\personal.vue"],"sourcesContent":["<template>\r\n  <div class=\"header\">\r\n    <Header></Header>\r\n  </div>\r\n  <div class=\"container\">\r\n    <div class=\"info-card\">\r\n      <el-card>\r\n        <div class=\"header2\">个人信息</div><br><br>\r\n        <div class=\"content\">\r\n          <el-form :model=\"form\" label-position=\"left\" label-width=\"100px\">\r\n            <el-form-item label=\"用户名\">\r\n              <el-input v-model=\"form.username\" disabled></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"密码\">\r\n              <el-input v-model=\"form.password\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"联系电话\">\r\n              <el-input v-model=\"form.telephone\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"地址\">\r\n              <el-input v-model=\"form.address\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"updateInfo\">保存</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { reactive, onMounted } from 'vue';\r\nimport { ElForm, ElFormItem, ElInput, ElCard } from 'element-plus';\r\nimport { message } from 'element-plus';\r\nimport Header from '../userLayout/Header/header.vue';\r\n\r\nexport default {\r\n  components: {\r\n    ElForm,\r\n    ElFormItem,\r\n    ElInput,\r\n    ElCard,\r\n    Header,\r\n  },\r\n  setup() {\r\n    const form = reactive({\r\n      username: '',\r\n      password: '',\r\n      telephone: '',\r\n      address: '',\r\n    });\r\n\r\n    const favorites = reactive([]);\r\n\r\n    const getInfo = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:8080/userInfo',\r\n          {\r\n            params: {\r\n              username: sessionStorage.getItem('username'),\r\n            }\r\n          }\r\n        );\r\n        const { username, telephone, address } = response.data;\r\n        form.username = username;\r\n        form.telephone = telephone;\r\n        form.address = address;\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n\r\n\r\n    const updateInfo = async () => {\r\n      try {\r\n        await axios.get('http://localhost:8080/updateUserInfo',\r\n          {\r\n            params: {\r\n              username:form.username,\r\n              password:form.password,\r\n              telephone:form.telephone,\r\n              address:form.address,\r\n              id: sessionStorage.getItem('userid'),\r\n            }\r\n          });\r\n          alert('个人信息已更新！');\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    onMounted(() => {\r\n      getInfo();\r\n    });\r\n\r\n    return {\r\n      form,\r\n      favorites,\r\n      updateInfo,\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  margin-top: 10%;\r\n}\r\n\r\n.info-card {\r\n  margin-bottom: 20px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}