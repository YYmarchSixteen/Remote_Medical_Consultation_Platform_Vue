{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'EquipmentList',\n\n  data() {\n    return {\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      list: [],\n      addForm: {},\n      editForm: {},\n      addDialogVisible: false,\n      editDialogVisible: false\n    };\n  },\n\n  created() {\n    this.getEquipmentList();\n  },\n\n  methods: {\n    // 获取器械列表数据\n    getEquipmentList() {\n      axios.get('/equipmentList').then(res => {\n        this.list = res.data;\n      });\n    },\n\n    // 打开添加器械框\n    addEquipment() {\n      this.addDialogVisible = true;\n      this.addForm = {};\n    },\n\n    // 添加器械确定\n    addConfirm() {\n      this.$refs.addForm.validate(valid => {\n        if (valid) {\n          axios.post('/insertEquipment', this.addForm).then(res => {\n            if (res.data === '添加成功') {\n              this.$message.success('添加成功！');\n              this.addDialogVisible = false;\n              this.getEquipmentList();\n            } else {\n              this.$message.error('添加失败！');\n            }\n          });\n        }\n      });\n    },\n\n    // 打开修改器械框\n    editEquipment(row) {\n      this.editDialogVisible = true;\n      this.editForm = Object.assign({}, row);\n    },\n\n    // 修改器械确定\n    editConfirm() {\n      this.$refs.editForm.validate(valid => {\n        if (valid) {\n          axios.post('/updateEquipment', this.editForm).then(res => {\n            if (res.data === '修改成功') {\n              this.$message.success('修改成功！');\n              this.editDialogVisible = false;\n              this.getEquipmentList();\n            } else {\n              this.$message.error('修改失败！');\n            }\n          });\n        }\n      });\n    },\n\n    // 删除器械\n    deleteEquipment(id) {\n      this.$confirm('确定要删除该器械吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        axios.post('/deleteEquipment', {\n          id\n        }).then(res => {\n          if (res.data === '删除成功') {\n            this.$message.success('删除成功！');\n            this.getEquipmentList();\n          }\n        });\n      }).catch(() => {});\n    },\n\n    handleAddSuccess(res) {\n      this.addForm.picture = 'http://localhost:8080/' + res.data.pictureUrl;\n    },\n\n    beforeAddUpload(file) {\n      const isJPG = file.type === 'image/jpeg';\n      const isPNG = file.type === 'image/png';\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG && !isPNG) {\n        this.$message.error('上传头像图片只能是 JPG/PNG 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n\n      return isJPG || isPNG && isLt2M;\n    },\n\n    handleEditSuccess(res) {\n      this.editForm.picture = 'http://localhost:8080/' + res.data.pictureUrl;\n    },\n\n    beforeEditUpload(file) {\n      const isJPG = file.type === 'image/jpeg';\n      const isPNG = file.type === 'image/png';\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG && !isPNG) {\n        this.$message.error('上传头像图片只能是 JPG/PNG 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n\n      return isJPG || isPNG && isLt2M;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","name","data","currentPage","pageSize","total","list","addForm","editForm","addDialogVisible","editDialogVisible","created","getEquipmentList","methods","get","then","res","addEquipment","addConfirm","$refs","validate","valid","post","$message","success","error","editEquipment","row","Object","assign","editConfirm","deleteEquipment","id","$confirm","confirmButtonText","cancelButtonText","type","catch","handleAddSuccess","picture","pictureUrl","beforeAddUpload","file","isJPG","isPNG","isLt2M","size","handleEditSuccess","beforeEditUpload"],"sourceRoot":"","sources":["D:\\Dev\\Front\\demo01\\src\\views\\Admin\\equipment.vue"],"sourcesContent":["<template>\r\n  <div class=\"equipmentList\">\r\n    <el-button type=\"primary\" @click=\"addEquipment\">添加器械</el-button>\r\n    <br /><br />\r\n    <el-table :data=\"list\" style=\"width: 100%\">\r\n      <el-table-column prop=\"id\" label=\"ID\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\r\n      <el-table-column prop=\"category\" label=\"类别\"></el-table-column>\r\n      <el-table-column prop=\"price\" label=\"价格\"></el-table-column>\r\n      <el-table-column prop=\"picture\" label=\"图片\">\r\n        <template slot-scope=\"scope\">\r\n          <img :src=\"scope.row.picture\" alt=\"\" style=\"max-height: 100px;\" />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" size=\"small\" @click=\"editEquipment(scope.row)\">编辑</el-button>\r\n          <el-button type=\"danger\" size=\"small\" @click=\"deleteEquipment(scope.row.id)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog title=\"添加器械\" :visible.sync=\"addDialogVisible\" width=\"30%\">\r\n      <el-form ref=\"addForm\" :model=\"addForm\" label-width=\"80px\">\r\n        <el-form-item label=\"名称\" prop=\"name\">\r\n          <el-input v-model=\"addForm.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"类别\" prop=\"category\">\r\n          <el-input v-model=\"addForm.category\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"价格\" prop=\"price\">\r\n          <el-input-number v-model=\"addForm.price\" :precision=\"2\" :step=\"0.01\"></el-input-number>\r\n        </el-form-item>\r\n        <el-form-item label=\"图片\">\r\n          <el-upload\r\n            class=\"avatar-uploader\"\r\n            action=\"http://localhost:8080/uploadEquipmentImg\"\r\n            :show-file-list=\"false\"\r\n            :on-success=\"handleAddSuccess\"\r\n            :before-upload=\"beforeAddUpload\"\r\n          >\r\n            <img v-if=\"addForm.picture\" :src=\"addForm.picture\" class=\"avatar\" />\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addConfirm\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"修改器械\" :visible.sync=\"editDialogVisible\" width=\"30%\">\r\n      <el-form ref=\"editForm\" :model=\"editForm\" label-width=\"80px\">\r\n        <el-form-item label=\"名称\" prop=\"name\">\r\n          <el-input v-model=\"editForm.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"类别\" prop=\"category\">\r\n          <el-input v-model=\"editForm.category\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"价格\" prop=\"price\">\r\n          <el-input-number v-model=\"editForm.price\" :precision=\"2\" :step=\"0.01\"></el-input-number>\r\n        </el-form-item>\r\n        <el-form-item label=\"图片\">\r\n          <el-upload\r\n            class=\"avatar-uploader\"\r\n            action=\"http://localhost:8080/uploadEquipmentImg\"\r\n            :show-file-list=\"false\"\r\n            :on-success=\"handleEditSuccess\"\r\n            :before-upload=\"beforeEditUpload\"\r\n          >\r\n            <img v-if=\"editForm.picture\" :src=\"editForm.picture\" class=\"avatar\" />\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editConfirm\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'EquipmentList',\r\n  data() {\r\n    return {\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      list: [],\r\n      addForm: {},\r\n      editForm: {},\r\n      addDialogVisible: false,\r\n      editDialogVisible: false,\r\n    }\r\n  },\r\n  created() {\r\n    this.getEquipmentList()\r\n  },\r\n  methods: {\r\n    // 获取器械列表数据\r\n    getEquipmentList() {\r\n      axios.get('/equipmentList').then((res) => {\r\n        this.list = res.data\r\n      })\r\n    },\r\n\r\n    // 打开添加器械框\r\n    addEquipment() {\r\n      this.addDialogVisible = true\r\n      this.addForm = {}\r\n    },\r\n\r\n    // 添加器械确定\r\n    addConfirm() {\r\n      this.$refs.addForm.validate((valid) => {\r\n        if (valid) {\r\n          axios.post('/insertEquipment', this.addForm).then((res) => {\r\n            if (res.data === '添加成功') {\r\n              this.$message.success('添加成功！')\r\n              this.addDialogVisible = false\r\n              this.getEquipmentList()\r\n            } else {\r\n              this.$message.error('添加失败！')\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    // 打开修改器械框\r\n    editEquipment(row) {\r\n      this.editDialogVisible = true\r\n      this.editForm = Object.assign({}, row)\r\n    },\r\n\r\n    // 修改器械确定\r\n    editConfirm() {\r\n      this.$refs.editForm.validate((valid) => {\r\n        if (valid) {\r\n          axios.post('/updateEquipment', this.editForm).then((res) => {\r\n            if (res.data === '修改成功') {\r\n              this.$message.success('修改成功！')\r\n              this.editDialogVisible = false\r\n              this.getEquipmentList()\r\n            } else {\r\n              this.$message.error('修改失败！')\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    // 删除器械\r\n    deleteEquipment(id) {\r\n      this.$confirm('确定要删除该器械吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n      })\r\n        .then(() => {\r\n          axios.post('/deleteEquipment', { id }).then((res) => {\r\n            if (res.data === '删除成功') {\r\n              this.$message.success('删除成功！')\r\n              this.getEquipmentList()\r\n            }\r\n          })\r\n        })\r\n        .catch(() => {})\r\n    },\r\n\r\n    handleAddSuccess(res) {\r\n      this.addForm.picture = 'http://localhost:8080/' + res.data.pictureUrl\r\n    },\r\n\r\n    beforeAddUpload(file) {\r\n      const isJPG = file.type === 'image/jpeg'\r\n      const isPNG = file.type === 'image/png'\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n\r\n      if (!isJPG && !isPNG) {\r\n        this.$message.error('上传头像图片只能是 JPG/PNG 格式!')\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传头像图片大小不能超过 2MB!')\r\n      }\r\n      return isJPG || isPNG && isLt2M\r\n    },\r\n\r\n    handleEditSuccess(res) {\r\n      this.editForm.picture = 'http://localhost:8080/' + res.data.pictureUrl\r\n    },\r\n\r\n    beforeEditUpload(file) {\r\n      const isJPG = file.type === 'image/jpeg'\r\n      const isPNG = file.type === 'image/png'\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n\r\n      if (!isJPG && !isPNG) {\r\n        this.$message.error('上传头像图片只能是 JPG/PNG 格式!')\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传头像图片大小不能超过 2MB!')\r\n      }\r\n      return isJPG || isPNG && isLt2M\r\n    },\r\n  },\r\n}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}