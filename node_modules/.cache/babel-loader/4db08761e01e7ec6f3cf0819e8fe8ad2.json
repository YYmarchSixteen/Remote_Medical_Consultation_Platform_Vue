{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      selectedDate: '',\n      reservations: [],\n      doctorId: ''\n    };\n  },\n\n  mounted() {\n    this.doctorId = this.$route.params.doctorId;\n  },\n\n  methods: {\n    async fetchReservations() {\n      try {\n        const formattedDate = this.formatDate(this.selectedDate);\n        const response = await axios.get(`http://localhost:8081/reserve/all?doctorId=${this.doctorId}&reserveTime=${formattedDate}`);\n        this.reservations = response.data.data; // 如果没有预约信息，则添加默认的30行时间\n\n        if (this.reservations.length === 0) {\n          this.reservations = this.generateDefaultReservations();\n        }\n      } catch (error) {\n        console.error('Error fetching reservations:', error);\n      }\n    },\n\n    formatDate(date) {\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, '0');\n      const day = String(date.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n\n    async reserveTime() {\n      try {// 实现预约时间的逻辑\n      } catch (error) {\n        console.error('Error reserving time:', error);\n      }\n    },\n\n    generateDefaultReservations() {\n      const defaultReservations = [];\n\n      for (let i = 1; i <= 30; i++) {\n        defaultReservations.push({\n          time: i,\n          status: '0' // 默认为未预约\n\n        });\n      }\n\n      return defaultReservations;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA6BA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAe;AACbC,MAAI,GAAG;AACL,WAAO;AACLC,kBAAY,EAAE,EADT;AAELC,kBAAY,EAAE,EAFT;AAGLC,cAAQ,EAAE;AAHL,KAAP;AAKD,GAPY;;AAQbC,SAAO,GAAG;AACR,SAAKD,QAAL,GAAgB,KAAKE,MAAL,CAAYC,MAAZ,CAAmBH,QAAnC;AACD,GAVY;;AAWbI,SAAO,EAAE;AACP,UAAMC,iBAAN,GAA0B;AACxB,UAAI;AACF,cAAMC,aAAY,GAAI,KAAKC,UAAL,CAAgB,KAAKT,YAArB,CAAtB;AACA,cAAMU,QAAO,GAAI,MAAMZ,KAAK,CAACa,GAAN,CAAW,8CAA6C,KAAKT,QAAS,gBAAeM,aAAc,EAAnG,CAAvB;AACA,aAAKP,YAAL,GAAoBS,QAAQ,CAACX,IAAT,CAAcA,IAAlC,CAHE,CAIF;;AACA,YAAI,KAAKE,YAAL,CAAkBW,MAAlB,KAA6B,CAAjC,EAAoC;AAClC,eAAKX,YAAL,GAAoB,KAAKY,2BAAL,EAApB;AACF;AACF,OARA,CAQE,OAAOC,KAAP,EAAc;AACdC,eAAO,CAACD,KAAR,CAAc,8BAAd,EAA8CA,KAA9C;AACF;AACD,KAbM;;AAcPL,cAAU,CAACO,IAAD,EAAO;AACf,YAAMC,IAAG,GAAID,IAAI,CAACE,WAAL,EAAb;AACA,YAAMC,KAAI,GAAIC,MAAM,CAACJ,IAAI,CAACK,QAAL,KAAkB,CAAnB,CAAN,CAA4BC,QAA5B,CAAqC,CAArC,EAAwC,GAAxC,CAAd;AACA,YAAMC,GAAE,GAAIH,MAAM,CAACJ,IAAI,CAACQ,OAAL,EAAD,CAAN,CAAuBF,QAAvB,CAAgC,CAAhC,EAAmC,GAAnC,CAAZ;AACA,aAAQ,GAAEL,IAAK,IAAGE,KAAM,IAAGI,GAAI,EAA/B;AACD,KAnBM;;AAoBP,UAAME,WAAN,GAAoB;AAClB,UAAI,CACF;AACF,OAFA,CAEE,OAAOX,KAAP,EAAc;AACdC,eAAO,CAACD,KAAR,CAAc,uBAAd,EAAuCA,KAAvC;AACF;AACD,KA1BM;;AA2BPD,+BAA2B,GAAG;AAC5B,YAAMa,mBAAkB,GAAI,EAA5B;;AACA,WAAK,IAAIC,IAAI,CAAb,EAAgBA,KAAK,EAArB,EAAyBA,CAAC,EAA1B,EAA8B;AAC5BD,2BAAmB,CAACE,IAApB,CAAyB;AACvBC,cAAI,EAAEF,CADiB;AAEvBG,gBAAM,EAAE,GAFe,CAEX;;AAFW,SAAzB;AAIF;;AACA,aAAOJ,mBAAP;AACF;;AApCO;AAXI,CAAf","names":["axios","data","selectedDate","reservations","doctorId","mounted","$route","params","methods","fetchReservations","formattedDate","formatDate","response","get","length","generateDefaultReservations","error","console","date","year","getFullYear","month","String","getMonth","padStart","day","getDate","reserveTime","defaultReservations","i","push","time","status"],"sourceRoot":"","sources":["D:\\Dev\\Front\\Remote_Medical_Consultation_Platform_Vue\\src\\views\\User\\reserve.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <el-date-picker v-model=\"selectedDate\" type=\"date\" placeholder=\"选择日期\" @change=\"fetchReservations\"></el-date-picker>\r\n\r\n    <el-table :data=\"reservations\" border stripe v-if=\"reservations.length > 0\">\r\n      <el-table-column label=\"时间\">\r\n        <template v-slot=\"scope\">\r\n          {{ scope.row.time }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"状态\">\r\n        <template v-slot=\"scope\">\r\n          <span v-if=\"scope.row.status === '1'\">已预约</span>\r\n          <span v-else>未预约</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template v-slot=\"scope\">\r\n          <el-button type=\"primary\" size=\"small\" @click=\"reserveTime()\">\r\n            预约\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <p v-else>暂无预约信息</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      selectedDate: '',\r\n      reservations: [],\r\n      doctorId: ''\r\n    }\r\n  },\r\n  mounted() {\r\n    this.doctorId = this.$route.params.doctorId;\r\n  },\r\n  methods: {\r\n    async fetchReservations() {\r\n      try {\r\n        const formattedDate = this.formatDate(this.selectedDate);\r\n        const response = await axios.get(`http://localhost:8081/reserve/all?doctorId=${this.doctorId}&reserveTime=${formattedDate}`);\r\n        this.reservations = response.data.data;\r\n        // 如果没有预约信息，则添加默认的30行时间\r\n        if (this.reservations.length === 0) {\r\n          this.reservations = this.generateDefaultReservations();\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching reservations:', error);\r\n      }\r\n    },\r\n    formatDate(date) {\r\n      const year = date.getFullYear();\r\n      const month = String(date.getMonth() + 1).padStart(2, '0');\r\n      const day = String(date.getDate()).padStart(2, '0');\r\n      return `${year}-${month}-${day}`;\r\n    },\r\n    async reserveTime() {\r\n      try {\r\n        // 实现预约时间的逻辑\r\n      } catch (error) {\r\n        console.error('Error reserving time:', error);\r\n      }\r\n    },\r\n    generateDefaultReservations() {\r\n      const defaultReservations = [];\r\n      for (let i = 1; i <= 30; i++) {\r\n        defaultReservations.push({\r\n          time: i,\r\n          status: '0' // 默认为未预约\r\n        });\r\n      }\r\n      return defaultReservations;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  margin: 20px auto;\r\n  max-width: 800px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}