{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      selectedDate: '',\n      reservations: [],\n      doctorId: '',\n      tableData: []\n    };\n  },\n\n  mounted() {\n    this.generateTableData();\n    this.doctorId = this.$route.params.doctorId;\n  },\n\n  methods: {\n    async fetchReservations() {\n      try {\n        const formattedDate = this.formatDate(this.selectedDate);\n        const response = await axios.get(`http://localhost:8081/reserve/all?doctorId=${this.doctorId}&reserveTime=${formattedDate}`);\n        this.reservations = response.data.data; // Update tableData with fetched reservations\n\n        this.tableData.forEach((row, index) => {\n          if (this.reservations[index] && this.reservations[index].status === 1) {\n            row.column2 = '已预约';\n          } else {\n            row.column2 = '无预约';\n          }\n\n          row.column3 = ''; // Reset column3 value\n        });\n      } catch (error) {\n        console.error('Error fetching reservations:', error);\n      }\n    },\n\n    reserve(row) {\n      // Handle reservation logic here\n      console.log('Reserved for:', row.time);\n    },\n\n    formatDate(date) {\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, '0');\n      const day = String(date.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n\n    generateTableData() {\n      const startTime = new Date('2024-04-07T08:00:00');\n\n      for (let i = 0; i < 15; i++) {\n        const time = new Date(startTime.getTime() + i * 15 * 60000);\n        this.tableData.push({\n          time: time.toLocaleTimeString([], {\n            hour: '2-digit',\n            minute: '2-digit'\n          }),\n          column2: '',\n          column3: ''\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAqBA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAe;AACbC,MAAI,GAAG;AACL,WAAO;AACLC,kBAAY,EAAE,EADT;AAELC,kBAAY,EAAE,EAFT;AAGLC,cAAQ,EAAE,EAHL;AAILC,eAAS,EAAE;AAJN,KAAP;AAMD,GARY;;AASbC,SAAO,GAAG;AACR,SAAKC,iBAAL;AACA,SAAKH,QAAL,GAAgB,KAAKI,MAAL,CAAYC,MAAZ,CAAmBL,QAAnC;AACD,GAZY;;AAabM,SAAO,EAAE;AACP,UAAMC,iBAAN,GAA0B;AACxB,UAAI;AACF,cAAMC,aAAY,GAAI,KAAKC,UAAL,CAAgB,KAAKX,YAArB,CAAtB;AACA,cAAMY,QAAO,GAAI,MAAMd,KAAK,CAACe,GAAN,CAAW,8CAA6C,KAAKX,QAAS,gBAAeQ,aAAc,EAAnG,CAAvB;AACA,aAAKT,YAAL,GAAoBW,QAAQ,CAACb,IAAT,CAAcA,IAAlC,CAHE,CAKF;;AACA,aAAKI,SAAL,CAAeW,OAAf,CAAuB,CAACC,GAAD,EAAMC,KAAN,KAAgB;AACrC,cAAI,KAAKf,YAAL,CAAkBe,KAAlB,KAA4B,KAAKf,YAAL,CAAkBe,KAAlB,EAAyBC,MAAzB,KAAoC,CAApE,EAAuE;AACrEF,eAAG,CAACG,OAAJ,GAAc,KAAd;AACF,WAFA,MAEO;AACLH,eAAG,CAACG,OAAJ,GAAc,KAAd;AACF;;AACAH,aAAG,CAACI,OAAJ,GAAc,EAAd,CANqC,CAMnB;AACnB,SAPD;AAQF,OAdA,CAcE,OAAOC,KAAP,EAAc;AACdC,eAAO,CAACD,KAAR,CAAc,8BAAd,EAA8CA,KAA9C;AACF;AACD,KAnBM;;AAoBPE,WAAO,CAACP,GAAD,EAAM;AACX;AACAM,aAAO,CAACE,GAAR,CAAY,eAAZ,EAA6BR,GAAG,CAACS,IAAjC;AACD,KAvBM;;AAwBPb,cAAU,CAACc,IAAD,EAAO;AACf,YAAMC,IAAG,GAAID,IAAI,CAACE,WAAL,EAAb;AACA,YAAMC,KAAI,GAAIC,MAAM,CAACJ,IAAI,CAACK,QAAL,KAAkB,CAAnB,CAAN,CAA4BC,QAA5B,CAAqC,CAArC,EAAwC,GAAxC,CAAd;AACA,YAAMC,GAAE,GAAIH,MAAM,CAACJ,IAAI,CAACQ,OAAL,EAAD,CAAN,CAAuBF,QAAvB,CAAgC,CAAhC,EAAmC,GAAnC,CAAZ;AACA,aAAQ,GAAEL,IAAK,IAAGE,KAAM,IAAGI,GAAI,EAA/B;AACD,KA7BM;;AA8BP3B,qBAAiB,GAAG;AAClB,YAAM6B,SAAQ,GAAI,IAAIC,IAAJ,CAAS,qBAAT,CAAlB;;AACA,WAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AAC3B,cAAMZ,IAAG,GAAI,IAAIW,IAAJ,CAASD,SAAS,CAACG,OAAV,KAAsBD,IAAI,EAAJ,GAAS,KAAxC,CAAb;AACA,aAAKjC,SAAL,CAAemC,IAAf,CAAoB;AAClBd,cAAI,EAAEA,IAAI,CAACe,kBAAL,CAAwB,EAAxB,EAA4B;AAAEC,gBAAI,EAAE,SAAR;AAAmBC,kBAAM,EAAE;AAA3B,WAA5B,CADY;AAElBvB,iBAAO,EAAE,EAFS;AAGlBC,iBAAO,EAAE;AAHS,SAApB;AAKF;AACF;;AAxCO;AAbI,CAAf","names":["axios","data","selectedDate","reservations","doctorId","tableData","mounted","generateTableData","$route","params","methods","fetchReservations","formattedDate","formatDate","response","get","forEach","row","index","status","column2","column3","error","console","reserve","log","time","date","year","getFullYear","month","String","getMonth","padStart","day","getDate","startTime","Date","i","getTime","push","toLocaleTimeString","hour","minute"],"sourceRoot":"","sources":["D:\\Dev\\Front\\Remote_Medical_Consultation_Platform_Vue\\src\\views\\User\\reserve.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <el-date-picker v-model=\"selectedDate\" type=\"date\" placeholder=\"选择日期\" @change=\"fetchReservations\">\r\n    </el-date-picker>\r\n\r\n    <el-table :data=\"tableData\" border style=\"width: 450px\">\r\n      <el-table-column prop=\"time\" label=\"时间\" width=\"150\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"column2\" label=\"预约状态\" width=\"150\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"column3\" label=\"操作\" width=\"150\">\r\n        <template v-slot=\"scope\">\r\n          <el-button v-if=\"scope.row.column2 === '1'\" disabled>不可操作</el-button>\r\n          <el-button v-else @click=\"reserve(scope.row)\">点击预约</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      selectedDate: '',\r\n      reservations: [],\r\n      doctorId: '',\r\n      tableData: []\r\n    }\r\n  },\r\n  mounted() {\r\n    this.generateTableData()\r\n    this.doctorId = this.$route.params.doctorId\r\n  },\r\n  methods: {\r\n    async fetchReservations() {\r\n      try {\r\n        const formattedDate = this.formatDate(this.selectedDate)\r\n        const response = await axios.get(`http://localhost:8081/reserve/all?doctorId=${this.doctorId}&reserveTime=${formattedDate}`)\r\n        this.reservations = response.data.data\r\n\r\n        // Update tableData with fetched reservations\r\n        this.tableData.forEach((row, index) => {\r\n          if (this.reservations[index] && this.reservations[index].status === 1) {\r\n            row.column2 = '已预约';\r\n          } else {\r\n            row.column2 = '无预约';\r\n          }\r\n          row.column3 = ''; // Reset column3 value\r\n        });\r\n      } catch (error) {\r\n        console.error('Error fetching reservations:', error)\r\n      }\r\n    },\r\n    reserve(row) {\r\n      // Handle reservation logic here\r\n      console.log('Reserved for:', row.time);\r\n    },\r\n    formatDate(date) {\r\n      const year = date.getFullYear()\r\n      const month = String(date.getMonth() + 1).padStart(2, '0')\r\n      const day = String(date.getDate()).padStart(2, '0')\r\n      return `${year}-${month}-${day}`\r\n    },\r\n    generateTableData() {\r\n      const startTime = new Date('2024-04-07T08:00:00')\r\n      for (let i = 0; i < 15; i++) {\r\n        const time = new Date(startTime.getTime() + i * 15 * 60000)\r\n        this.tableData.push({\r\n          time: time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),\r\n          column2: '',\r\n          column3: ''\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  margin: 20px auto;\r\n  max-width: 800px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}