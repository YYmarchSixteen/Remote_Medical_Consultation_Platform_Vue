{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createBlock as _createBlock, normalizeClass as _normalizeClass, withKeys as _withKeys, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-d6fc84e2\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"chat-container\"\n};\nconst _hoisted_2 = {\n  class: \"user-list\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 主页 \");\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" 个人中心 \");\n\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"header\",\n  class: \"user-header\"\n}, \"用户列表\", -1\n/* HOISTED */\n));\n\nconst _hoisted_6 = {\n  class: \"chat-content\"\n};\nconst _hoisted_7 = {\n  id: \"header\",\n  class: \"chat-header\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_10 = {\n  class: \"action-buttons\"\n};\n\nconst _hoisted_11 = /*#__PURE__*/_createTextVNode(\"写病历\");\n\nconst _hoisted_12 = /*#__PURE__*/_createTextVNode(\"开处方\");\n\nconst _hoisted_13 = /*#__PURE__*/_createTextVNode(\"开启视频\");\n\nconst _hoisted_14 = {\n  class: \"chat-messages\"\n};\nconst _hoisted_15 = {\n  key: 0,\n  class: \"user-message\"\n};\n\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_17 = {\n  key: 1,\n  class: \"doctor-message\"\n};\n\nconst _hoisted_18 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  style: {\n    \"display\": \"block\",\n    \"-webkit-user-select\": \"none\",\n    \"margin\": \"auto\",\n    \"width\": \"500px\",\n    \"height\": \"500px\",\n    \"background-color\": \"\"\n  },\n  src: \"http://192.168.43.212:81/stream\",\n  alt: \"mediaStreaming\"\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_20 = {\n  id: \"footer\",\n  class: \"dialog-footer\"\n};\n\nconst _hoisted_21 = /*#__PURE__*/_createTextVNode(\"取 消\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_menu_item = _resolveComponent(\"el-menu-item\");\n\n  const _component_el_menu = _resolveComponent(\"el-menu\");\n\n  const _component_el_scrollbar = _resolveComponent(\"el-scrollbar\");\n\n  const _component_el_card = _resolveComponent(\"el-card\");\n\n  const _component_el_input = _resolveComponent(\"el-input\");\n\n  const _component_el_divider = _resolveComponent(\"el-divider\");\n\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createCommentVNode(\" 用户列表 \"), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_card, {\n    class: \"user-card\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_button, {\n      link: \"\",\n      type: \"primary\",\n      size: \"small\",\n      onClick: $options.toPatient\n    }, {\n      default: _withCtx(() => [_hoisted_3]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"onClick\"]), _createVNode(_component_el_button, {\n      link: \"\",\n      type: \"primary\",\n      size: \"small\",\n      onClick: $options.toPersonal\n    }, {\n      default: _withCtx(() => [_hoisted_4]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"onClick\"]), _hoisted_5, _createVNode(_component_el_scrollbar, {\n      \"wrap-class\": \"user-scrollbar\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_menu, {\n        class: \"user-menu\",\n        \"default-active\": $data.currentUserId,\n        mode: \"vertical\"\n      }, {\n        default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.userList, user => {\n          return _openBlock(), _createBlock(_component_el_menu_item, {\n            key: user.userId,\n            index: user.userId,\n            onClick: $event => $options.handleUserSelect(user.username)\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(user.username), 1\n            /* TEXT */\n            )]),\n            _: 2\n            /* DYNAMIC */\n\n          }, 1032\n          /* PROPS, DYNAMIC_SLOTS */\n          , [\"index\", \"onClick\"]);\n        }), 128\n        /* KEYED_FRAGMENT */\n        ))]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"default-active\"])]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  })]), _createCommentVNode(\" 聊天内容 \"), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_card, {\n    class: \"chat-card\"\n  }, {\n    default: _withCtx(() => [_createCommentVNode(\" 聊天头部 \"), _createElementVNode(\"div\", _hoisted_7, [_createTextVNode(_toDisplayString($data.currentUsername), 1\n    /* TEXT */\n    ), _hoisted_8, _hoisted_9, _createCommentVNode(\" 写病历和开处方按钮 \"), _createElementVNode(\"div\", _hoisted_10, [_createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $options.redirectToMedicalRecord\n    }, {\n      default: _withCtx(() => [_hoisted_11]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"onClick\"]), _createVNode(_component_el_button, {\n      type: \"success\",\n      onClick: $options.redirectToPrescription\n    }, {\n      default: _withCtx(() => [_hoisted_12]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"onClick\"]), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $options.handleVideo\n    }, {\n      default: _withCtx(() => [_hoisted_13]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"onClick\"])])]), _createVNode(_component_el_scrollbar, {\n      \"wrap-class\": \"chat-scrollbar\",\n      style: {\n        \"height\": \"80vh\"\n      }\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_14, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.currentChat, message => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: message.id,\n          class: _normalizeClass([\"chat-message\", {\n            'sent-message': message.sender !== 'user',\n            'received-message': message.sender === 'user'\n          }])\n        }, [message.sender === 'user' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [_createTextVNode(_toDisplayString(message.message), 1\n        /* TEXT */\n        ), _hoisted_16, _createTextVNode(_toDisplayString(message.formattedTime), 1\n        /* TEXT */\n        )])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [_createTextVNode(_toDisplayString(message.message), 1\n        /* TEXT */\n        ), _hoisted_18, _createTextVNode(_toDisplayString(message.formattedTime), 1\n        /* TEXT */\n        )]))], 2\n        /* CLASS */\n        );\n      }), 128\n      /* KEYED_FRAGMENT */\n      ))])]),\n      _: 1\n      /* STABLE */\n\n    }), _createCommentVNode(\" 输入框 \"), _createVNode(_component_el_input, {\n      class: \"chat-input\",\n      modelValue: $data.newMessage,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.newMessage = $event),\n      onKeyup: _withKeys($options.sendMessage, [\"enter\"]),\n      placeholder: \"请输入消息\",\n      clearable: \"\"\n    }, null, 8\n    /* PROPS */\n    , [\"modelValue\", \"onKeyup\"])]),\n    _: 1\n    /* STABLE */\n\n  })])]), _createCommentVNode(\" 视频窗口 \"), _createVNode(_component_el_dialog, {\n    modelValue: $data.dialogVisible,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.dialogVisible = $event),\n    width: \"800px\",\n    height: \"480\",\n    \"before-close\": $options.handleClose\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_divider), _hoisted_19, _createElementVNode(\"span\", _hoisted_20, [_createVNode(_component_el_button, {\n      onClick: _cache[1] || (_cache[1] = $event => $data.dialogVisible = false)\n    }, {\n      default: _withCtx(() => [_hoisted_21]),\n      _: 1\n      /* STABLE */\n\n    })])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"modelValue\", \"before-close\"])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","id","style","src","alt","_createCommentVNode","_createVNode","_component_el_card","_component_el_button","link","type","size","onClick","$options","_hoisted_5","_component_el_scrollbar","_component_el_menu","$data","mode","_createElementBlock","_Fragment","_renderList","user","_createBlock","_component_el_menu_item","key","userId","index","username","_hoisted_8","_hoisted_9","message","sender","_hoisted_16","formattedTime","_hoisted_18","_component_el_input","$event","onKeyup","placeholder","clearable","_component_el_dialog","width","height","_component_el_divider","_hoisted_19"],"sourceRoot":"","sources":["D:\\Dev\\Front\\Remote_Medical_Consultation_Platform_Vue\\src\\views\\Doctor\\messageList.vue"],"sourcesContent":["<template>\r\n  <div class=\"chat-container\">\r\n    <!-- 用户列表 -->\r\n    <div class=\"user-list\">\r\n      <el-card class=\"user-card\">\r\n        <el-button link type=\"primary\" size=\"small\" @click=\"toPatient\">\r\n          主页\r\n        </el-button>\r\n        <el-button link type=\"primary\" size=\"small\" @click=\"toPersonal\">\r\n          个人中心\r\n        </el-button>\r\n        <div id=\"header\" class=\"user-header\">用户列表</div>\r\n        <el-scrollbar wrap-class=\"user-scrollbar\">\r\n          <el-menu class=\"user-menu\" :default-active=\"currentUserId\" mode=\"vertical\">\r\n            <el-menu-item v-for=\"user in userList\" :key=\"user.userId\" :index=\"user.userId\"\r\n                          @click=\"handleUserSelect(user.username)\">\r\n              {{ user.username }}\r\n            </el-menu-item>\r\n          </el-menu>\r\n        </el-scrollbar>\r\n      </el-card>\r\n    </div>\r\n\r\n    <!-- 聊天内容 -->\r\n    <div class=\"chat-content\">\r\n      <el-card class=\"chat-card\">\r\n        <!-- 聊天头部 -->\r\n        <div id=\"header\" class=\"chat-header\">{{ currentUsername }}<br><br>\r\n          <!-- 写病历和开处方按钮 -->\r\n          <div class=\"action-buttons\">\r\n            <el-button type=\"primary\" @click=\"redirectToMedicalRecord\">写病历</el-button>\r\n            <el-button type=\"success\" @click=\"redirectToPrescription\">开处方</el-button>\r\n            <el-button type=\"primary\" @click=\"handleVideo\">开启视频</el-button>\r\n          </div>\r\n        </div>\r\n        <el-scrollbar wrap-class=\"chat-scrollbar\" style=\"height: 80vh\">\r\n          <div class=\"chat-messages\">\r\n            <div v-for=\"message in currentChat\" :key=\"message.id\" class=\"chat-message\"\r\n                 :class=\"{ 'sent-message': message.sender !== 'user', 'received-message': message.sender === 'user' }\">\r\n              <div v-if=\"message.sender === 'user'\" class=\"user-message\">\r\n                {{ message.message }}<br>{{ message.formattedTime }}\r\n              </div>\r\n              <div v-else class=\"doctor-message\">\r\n                {{ message.message }}<br>{{ message.formattedTime }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </el-scrollbar>\r\n        <!-- 输入框 -->\r\n        <el-input class=\"chat-input\" v-model=\"newMessage\" @keyup.enter=\"sendMessage\" placeholder=\"请输入消息\"\r\n                  clearable></el-input>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n  <!-- 视频窗口 -->\r\n  <el-dialog\r\n    v-model=\"dialogVisible\"\r\n    width=\"800px\"\r\n    height=\"480\"\r\n    :before-close=\"handleClose\"\r\n  >\r\n    <el-divider />\r\n    <img style=\"display: block;\r\n    -webkit-user-select: none;\r\n    margin: auto;\r\n    width: 500px;\r\n    height: 500px;\r\n    background-color: \r\n    hsl(0, 0%, 25%);\"\r\n         src=\"http://192.168.43.212:81/stream\" alt=\"mediaStreaming\">\r\n    <span id=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n    </span>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      userList: [],\r\n      currentUserId: null,\r\n      currentUsername: '',\r\n      currentChat: [],\r\n      newMessage: '',\r\n      dialogVisible: false\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchUserList()\r\n  },\r\n  methods: {\r\n    fetchUserList() {\r\n      axios.get(`http://localhost:8081/chat/doctorChatList?doctorId=13`)\r\n        .then(response => {\r\n          this.userList = response.data.data\r\n          if (this.userList.length > 0) {\r\n            this.currentUsername = this.userList[0].username\r\n            this.currentUserId = this.userList[0].userId\r\n            this.fetchChatContent(this.currentUserId)\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('Error fetching user list:', error)\r\n        })\r\n    },\r\n    fetchChatContent(userId) {\r\n      axios.get(`http://localhost:8081/chat/all?doctorId=13&userId=${userId}`)\r\n        .then(response => {\r\n          this.currentChat = response.data.data.map(message => {\r\n            const formattedTime = new Date(message.sendTime).toLocaleString()\r\n            return { ...message, formattedTime }\r\n          })\r\n        })\r\n        .catch(error => {\r\n          console.error('Error fetching chat content:', error)\r\n        })\r\n    },\r\n    handleUserSelect(username) {\r\n      this.currentUsername = username\r\n      const selectedUser = this.userList.find(user => user.username === username)\r\n      if (selectedUser) {\r\n        this.currentUserId = selectedUser.userId\r\n        this.fetchChatContent(this.currentUserId)\r\n      }\r\n    },\r\n    redirectToMedicalRecord() {\r\n      this.$router.push('/doctor/emr')\r\n    },\r\n    redirectToPrescription() {\r\n      this.$router.push('/doctor/prescription')\r\n    },\r\n    sendMessage() {\r\n      if (this.newMessage.trim() !== '') {\r\n        const message = {\r\n          id: this.currentChat.length + 1,\r\n          message: this.newMessage.trim(),\r\n          sender: 'doctor', // 将消息标记为医生的发言\r\n          formattedTime: new Date().toLocaleString()\r\n        }\r\n        this.currentChat.push(message)\r\n        this.newMessage = ''\r\n      }\r\n    },\r\n    toPatient() {\r\n      this.$router.push('/doctor/patient')\r\n    },\r\n    toPersonal() {\r\n      this.$router.push('/doctor/Personal')\r\n    },\r\n    handleClose() {\r\n      this.dialogVisible = false\r\n      const video = document.getElementById('video')\r\n      video.pause()\r\n    },\r\n    handleVideo() {\r\n      this.dialogVisible = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-container {\r\n  display: flex;\r\n  height: 100vh;\r\n}\r\n\r\n.user-list {\r\n  width: 250px;\r\n  flex-shrink: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.user-card {\r\n  height: 100%;\r\n}\r\n\r\n.user-header {\r\n  padding: 10px;\r\n}\r\n\r\n.user-scrollbar {\r\n  height: calc(100% - 40px);\r\n}\r\n\r\n.user-menu {\r\n  height: 100%;\r\n}\r\n\r\n.chat-content {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.chat-card {\r\n  height: 100%;\r\n}\r\n\r\n.chat-header {\r\n  padding: 10px;\r\n}\r\n\r\n.chat-scrollbar {\r\n  height: calc(100% - 40px);\r\n}\r\n\r\n.chat-messages {\r\n  padding: 10px;\r\n}\r\n\r\n.chat-message {\r\n  margin-bottom: 10px;\r\n  padding: 8px;\r\n  border-radius: 5px;\r\n}\r\n\r\n.sent-message {\r\n  background-color: #f0f0f0;\r\n}\r\n\r\n.chat-input {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.sent-message {\r\n  background-color: #f0f0f0;\r\n  text-align: right;\r\n}\r\n\r\n.received-message {\r\n  background-color: #e3f2fd;\r\n  text-align: left;\r\n}\r\n\r\n.chat-message {\r\n  margin-bottom: 10px;\r\n  padding: 8px;\r\n  border-radius: 5px;\r\n  word-wrap: break-word;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}