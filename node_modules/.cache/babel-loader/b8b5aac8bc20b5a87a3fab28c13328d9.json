{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport axios from 'axios';\nimport Header from '../userLayout/Header/header.vue';\nexport default {\n  components: {\n    Header\n  },\n\n  data() {\n    return {\n      userInfo: {\n        username: ''\n      },\n      passwordForm: {\n        oldPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n      },\n      rules: {\n        address: [{\n          required: true,\n          message: '请输入地址',\n          trigger: 'blur'\n        }],\n        telephone: [{\n          required: true,\n          message: '请输入手机号',\n          trigger: 'blur'\n        }]\n      },\n      passwordRules: {\n        oldPassword: [{\n          required: true,\n          message: '请输入旧密码',\n          trigger: 'blur'\n        }],\n        newPassword: [{\n          required: true,\n          message: '请输入新密码',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          max: 20,\n          message: '密码长度为6-20位',\n          trigger: 'blur'\n        }],\n        confirmPassword: [{\n          required: true,\n          message: '请再次输入新密码',\n          trigger: 'blur'\n        }, {\n          validator: (rule, value, callback) => {\n            if (value !== this.passwordForm.newPassword) {\n              callback(new Error('两次输入的密码不一致'));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'blur'\n        }]\n      },\n      activeTab: 'basic-info'\n    };\n  },\n\n  mounted() {\n    this.fetchUserInfo();\n  },\n\n  methods: {\n    fetchUserInfo() {\n      axios.get('http://localhost:8080/getSessionUser').then(res => {\n        this.userInfo = res.data;\n      });\n    },\n\n    updateUserInfo() {\n      this.refs.userInfoForm.validate(valid => {\n        if (valid) {\n          axios.put('http://localhost:8080/getSessionUser', this.userInfo).then(() => {\n            this.message.success('保存成功');\n          });\n        }\n      });\n    },\n\n    changePassword() {\n      this.refs.passwordForm.validate(valid => {\n        if (valid) {\n          axios.put('http://localhost:8080/password', this.passwordForm).then(() => {\n            this.message.success('密码修改成功');\n            this.passwordForm = {\n              oldPassword: '',\n              newPassword: '',\n              confirmPassword: ''\n            };\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","Header","components","data","userInfo","username","passwordForm","oldPassword","newPassword","confirmPassword","rules","address","required","message","trigger","telephone","passwordRules","min","max","validator","rule","value","callback","Error","activeTab","mounted","fetchUserInfo","methods","get","then","res","updateUserInfo","refs","userInfoForm","validate","valid","put","success","changePassword"],"sourceRoot":"","sources":["D:\\Dev\\Front\\demo01\\src\\views\\User\\personal.vue"],"sourcesContent":["<template>\r\n  <div class=\"header\">\r\n    <Header></Header>\r\n  </div>\r\n  <div class=\"personal-center\">\r\n    <el-card shadow=\"hover\">\r\n      <div v-slot=\"header\" class=\"card-header\">\r\n        <h3>个人中心</h3>\r\n      </div>\r\n      <div class=\"card-content\">\r\n        <el-tabs v-model=\"activeTab\" type=\"border-card\">\r\n          <el-tab-pane label=\"基本信息\" name=\"basic-info\">\r\n            <el-form :model=\"userInfo\" :rules=\"rules\" ref=\"userInfoForm\" label-width=\"120px\">\r\n              <el-form-item label=\"用户名\" prop=\"username\">\r\n                <el-input v-model=\"userInfo.username\" disabled></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"地址\" prop=\"address\">\r\n                <el-input v-model=\"userInfo.address\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"手机号\" prop=\"phone\">\r\n                <el-input v-model=\"userInfo.telephone\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"updateUserInfo\">保存</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"修改密码\" name=\"change-password\">\r\n            <el-form :model=\"passwordForm\" :rules=\"passwordRules\" ref=\"passwordForm\" label-width=\"120px\">\r\n              <el-form-item label=\"旧密码\" prop=\"oldPassword\">\r\n                <el-input type=\"password\" v-model=\"passwordForm.oldPassword\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"新密码\" prop=\"newPassword\">\r\n                <el-input type=\"password\" v-model=\"passwordForm.newPassword\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\r\n                <el-input type=\"password\" v-model=\"passwordForm.confirmPassword\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"changePassword\">修改密码</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n  \r\n<script>\r\nimport axios from 'axios'\r\nimport Header from '../userLayout/Header/header.vue';\r\n\r\nexport default {\r\n  components: {\r\n        Header\r\n    },\r\n  data() {\r\n    return {\r\n      userInfo: {\r\n        username:'',\r\n      },\r\n      passwordForm: {\r\n        oldPassword: '',\r\n        newPassword: '',\r\n        confirmPassword: ''\r\n      },\r\n      rules: {\r\n        address: [{ required: true, message: '请输入地址', trigger: 'blur' }],\r\n        telephone: [{ required: true, message: '请输入手机号', trigger: 'blur' }]\r\n      },\r\n      passwordRules: {\r\n        oldPassword: [{ required: true, message: '请输入旧密码', trigger: 'blur' }],\r\n        newPassword: [\r\n          { required: true, message: '请输入新密码', trigger: 'blur' },\r\n          { min: 6, max: 20, message: '密码长度为6-20位', trigger: 'blur' }\r\n        ],\r\n        confirmPassword: [\r\n          { required: true, message: '请再次输入新密码', trigger: 'blur' },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              if (value !== this.passwordForm.newPassword) {\r\n                callback(new Error('两次输入的密码不一致'))\r\n              } else {\r\n                callback()\r\n              }\r\n            },\r\n            trigger: 'blur'\r\n          }\r\n        ]\r\n      },\r\n      activeTab: 'basic-info'\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchUserInfo()\r\n  },\r\n  methods: {\r\n    fetchUserInfo() {\r\n      axios.get('http://localhost:8080/getSessionUser').then(res => {\r\n        this.userInfo = res.data\r\n      })\r\n    },\r\n    updateUserInfo() {\r\n      this.refs.userInfoForm.validate(valid => {\r\n        if (valid) {\r\n          axios.put('http://localhost:8080/getSessionUser', this.userInfo).then(() => {\r\n            this.message.success('保存成功')\r\n          })\r\n        }\r\n      })\r\n    },\r\n    changePassword() {\r\n      this.refs.passwordForm.validate(valid => {\r\n        if (valid) {\r\n          axios.put('http://localhost:8080/password', this.passwordForm).then(() => {\r\n            this.message.success('密码修改成功')\r\n            this.passwordForm = {\r\n              oldPassword: '',\r\n              newPassword: '',\r\n              confirmPassword: ''\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n  \r\n<style scoped>\r\n.personal-center {\r\n  margin: 20px auto;\r\n  max-width: 800px;\r\n  margin-top: 100px;\r\n}\r\n\r\n.card-header {\r\n  background-color: #f5f7fa;\r\n  padding: 12px 20px;\r\n}\r\n\r\n.card-content {\r\n  padding: 20px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}