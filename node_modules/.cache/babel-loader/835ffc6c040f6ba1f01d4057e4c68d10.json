{"ast":null,"code":"export default {\n  data() {\n    return {\n      // res 参考的是后端返回的数据格式，\n      res: [{\n        id: 1,\n        dealer_id: 0,\n        name: '成都运费模板',\n        type: 1,\n        ext: {\n          default: [{\n            area: '默认',\n            type: 1,\n            region: '1',\n            weight: '首重d',\n            weight_incre: '续重d',\n            first_price: '运费d',\n            extend_price: '最终运费d'\n          }],\n          free: [{\n            area: 'free',\n            type: 1,\n            region: '1',\n            weight: '首重f',\n            weight_incre: '续重f',\n            first_price: '运费f',\n            extend_price: '最终运费f'\n          }, {\n            area: 'free',\n            type: 1,\n            region: '1',\n            weight: '首重f',\n            weight_incre: '续重f',\n            first_price: '运费f',\n            extend_price: '最终运费f'\n          }],\n          pay: [{\n            area: 'pay',\n            type: 1,\n            region: '1',\n            weight: '首重p',\n            weight_incre: '续重p',\n            first_price: '运费p',\n            extend_price: '最终运费p'\n          }, {\n            area: 'pay',\n            type: 1,\n            region: '1',\n            weight: '首重p',\n            weight_incre: '续重p',\n            first_price: '运费p',\n            extend_price: '最终运费p'\n          }, {\n            area: 'pay',\n            type: 1,\n            region: '1',\n            weight: '首重p',\n            weight_incre: '续重p',\n            first_price: '运费p',\n            extend_price: '最终运费p'\n          }]\n        }\n      }, {\n        id: 2,\n        dealer_id: 0,\n        name: '重庆运费模板',\n        type: 2,\n        ext: {\n          default: [{\n            area: '默认1',\n            type: 1,\n            region: '1',\n            weight: '首重d',\n            weight_incre: '续重d',\n            first_price: '运费d',\n            extend_price: '最终运费d'\n          }],\n          free: [{\n            area: 'free1',\n            type: 1,\n            region: '1',\n            weight: '首重f',\n            weight_incre: '续重f',\n            first_price: '运费f',\n            extend_price: '最终运费f'\n          }, {\n            area: 'free',\n            type: 1,\n            region: '1',\n            weight: '首重f',\n            weight_incre: '续重f',\n            first_price: '运费f',\n            extend_price: '最终运费f'\n          }],\n          pay: [{\n            area: 'pay1',\n            type: 1,\n            region: '1',\n            weight: '首重p',\n            weight_incre: '续重p',\n            first_price: '运费p',\n            extend_price: '最终运费p'\n          }, {\n            area: 'pay',\n            type: 1,\n            region: '1',\n            weight: '首重p',\n            weight_incre: '续重p',\n            first_price: '运费p',\n            extend_price: '最终运费p'\n          }, {\n            area: 'pay',\n            type: 1,\n            region: '1',\n            weight: '首重p',\n            weight_incre: '续重p',\n            first_price: '运费p',\n            extend_price: '最终运费p'\n          }, {\n            area: 'pay1',\n            type: 1,\n            region: '1',\n            weight: '首重p',\n            weight_incre: '续重p',\n            first_price: '运费p',\n            extend_price: '最终运费p'\n          }, {\n            area: 'pay',\n            type: 1,\n            region: '1',\n            weight: '首重p',\n            weight_incre: '续重p',\n            first_price: '运费p',\n            extend_price: '最终运费p'\n          }, {\n            area: 'pay',\n            type: 1,\n            region: '1',\n            weight: '首重p',\n            weight_incre: '续重p',\n            first_price: '运费p',\n            extend_price: '最终运费p'\n          }]\n        }\n      }]\n    };\n  },\n\n  methods: {\n    handleEdit(index, row) {\n      console.log(index, row);\n    },\n\n    handleDelete(index, row) {\n      console.log(index, row);\n    },\n\n    objectSpanMethod({\n      row,\n      column,\n      rowIndex,\n      columnIndex\n    }) {\n      if (columnIndex === 0) {\n        if (rowIndex === 0) {\n          let maxLen;\n          this.res.forEach(val => {\n            const arr = [val.ext.default.length, val.ext.free.length, val.ext.pay.length];\n            arr.sort((a, b) => a - b); // arr数组  按数字大小从小到大排序\n\n            maxLen = arr.pop(); // 取出排序后的数组arr中的最后一个元素\n          });\n          return {\n            // 这个rowspan应该据 ext的default,pay,free的长度不同来定，取最大长度\n            rowspan: maxLen,\n            colspan: 1\n          };\n        } else {\n          return {\n            rowspan: 0,\n            colspan: 0\n          };\n        }\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["data","res","id","dealer_id","name","type","ext","default","area","region","weight","weight_incre","first_price","extend_price","free","pay","methods","handleEdit","index","row","console","log","handleDelete","objectSpanMethod","column","rowIndex","columnIndex","maxLen","forEach","val","arr","length","sort","a","b","pop","rowspan","colspan"],"sourceRoot":"","sources":["D:\\小学期vscode\\demo01\\src\\views\\Department\\demo.vue"],"sourcesContent":["<template>\r\n  <div class=\"layout\">\r\n    <el-table :data=\"res\">\r\n      <el-table-column prop=\"name\">\r\n        <template slot-scope=\"scope\">\r\n          <div class=\"tab_header\">\r\n            <span style=\"font-weight: 600\">{{ scope.row.name }}</span>\r\n            <div class=\"operate\">\r\n              <span @click=\"handleEdit(scope.$index, scope.row)\">修改</span>\r\n              <span @click=\"handleDelete(scope.$index, scope.row)\">删除</span>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 这里要实现 多个表格共用一个表头，故需做判断，当表格要渲染的数据为default这个数组的时候，才显示表头的label值 -->\r\n          <!-- 注意：当label无值的时候，还是会占用空间，故当前表格在页面上会出现一个代表表头的空行，需要手动更改（重写）Element表格的 thead样式 -->\r\n\r\n          <div v-for=\"item in scope.row.ext\" :key=\"item.id\">\r\n            <el-table\r\n              :data=\"item\"\r\n              border\r\n              :class=\"item !== scope.row.ext.default ? 'tab-thead-style' : ''\"\r\n              style=\"box-sizing: border-box; border-top: none\"\r\n              :span-method=\"objectSpanMethod\"\r\n            >\r\n              <el-table-column\r\n                :label=\"item === scope.row.ext.default ? '运送到' : ''\"\r\n                prop=\"area\"\r\n              ></el-table-column>\r\n              <el-table-column\r\n                :label=\"item === scope.row.ext.default ? '首重' : ''\"\r\n                prop=\"weight\"\r\n              ></el-table-column>\r\n              <el-table-column\r\n                :label=\"item === scope.row.ext.default ? '运费' : ''\"\r\n                prop=\"first_price\"\r\n              ></el-table-column>\r\n              <el-table-column\r\n                :label=\"item === scope.row.ext.default ? '续重' : ''\"\r\n                prop=\"weight_incre\"\r\n              ></el-table-column>\r\n              <el-table-column\r\n                :label=\"item === scope.row.ext.default ? '最终运费' : ''\"\r\n                prop=\"extend_price\"\r\n              ></el-table-column>\r\n            </el-table>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      // res 参考的是后端返回的数据格式，\r\n      res: [\r\n        {\r\n          id: 1,\r\n          dealer_id: 0,\r\n          name: '成都运费模板',\r\n          type: 1,\r\n          ext: {\r\n            default: [\r\n              {\r\n                area: '默认',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重d',\r\n                weight_incre: '续重d',\r\n                first_price: '运费d',\r\n                extend_price: '最终运费d'\r\n              }\r\n            ],\r\n            free: [\r\n              {\r\n                area: 'free',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重f',\r\n                weight_incre: '续重f',\r\n                first_price: '运费f',\r\n                extend_price: '最终运费f'\r\n              },\r\n              {\r\n                area: 'free',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重f',\r\n                weight_incre: '续重f',\r\n                first_price: '运费f',\r\n                extend_price: '最终运费f'\r\n              }\r\n            ],\r\n            pay: [\r\n              {\r\n                area: 'pay',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重p',\r\n                weight_incre: '续重p',\r\n                first_price: '运费p',\r\n                extend_price: '最终运费p'\r\n              },\r\n              {\r\n                area: 'pay',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重p',\r\n                weight_incre: '续重p',\r\n                first_price: '运费p',\r\n                extend_price: '最终运费p'\r\n              },\r\n              {\r\n                area: 'pay',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重p',\r\n                weight_incre: '续重p',\r\n                first_price: '运费p',\r\n                extend_price: '最终运费p'\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          id: 2,\r\n          dealer_id: 0,\r\n          name: '重庆运费模板',\r\n          type: 2,\r\n          ext: {\r\n            default: [\r\n              {\r\n                area: '默认1',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重d',\r\n                weight_incre: '续重d',\r\n                first_price: '运费d',\r\n                extend_price: '最终运费d'\r\n              }\r\n            ],\r\n            free: [\r\n              {\r\n                area: 'free1',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重f',\r\n                weight_incre: '续重f',\r\n                first_price: '运费f',\r\n                extend_price: '最终运费f'\r\n              },\r\n              {\r\n                area: 'free',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重f',\r\n                weight_incre: '续重f',\r\n                first_price: '运费f',\r\n                extend_price: '最终运费f'\r\n              }\r\n            ],\r\n            pay: [\r\n              {\r\n                area: 'pay1',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重p',\r\n                weight_incre: '续重p',\r\n                first_price: '运费p',\r\n                extend_price: '最终运费p'\r\n              },\r\n              {\r\n                area: 'pay',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重p',\r\n                weight_incre: '续重p',\r\n                first_price: '运费p',\r\n                extend_price: '最终运费p'\r\n              },\r\n              {\r\n                area: 'pay',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重p',\r\n                weight_incre: '续重p',\r\n                first_price: '运费p',\r\n                extend_price: '最终运费p'\r\n              },\r\n              {\r\n                area: 'pay1',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重p',\r\n                weight_incre: '续重p',\r\n                first_price: '运费p',\r\n                extend_price: '最终运费p'\r\n              },\r\n              {\r\n                area: 'pay',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重p',\r\n                weight_incre: '续重p',\r\n                first_price: '运费p',\r\n                extend_price: '最终运费p'\r\n              },\r\n              {\r\n                area: 'pay',\r\n                type: 1,\r\n                region: '1',\r\n                weight: '首重p',\r\n                weight_incre: '续重p',\r\n                first_price: '运费p',\r\n                extend_price: '最终运费p'\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    handleEdit(index, row) {\r\n      console.log(index, row)\r\n    },\r\n    handleDelete(index, row) {\r\n      console.log(index, row)\r\n    },\r\n    objectSpanMethod({ row, column, rowIndex, columnIndex }) {\r\n      if (columnIndex === 0) {\r\n        if (rowIndex === 0) {\r\n          let maxLen\r\n          this.res.forEach((val) => {\r\n            const arr = [\r\n              val.ext.default.length,\r\n              val.ext.free.length,\r\n              val.ext.pay.length\r\n            ]\r\n            arr.sort((a, b) => a - b) // arr数组  按数字大小从小到大排序\r\n            maxLen = arr.pop() // 取出排序后的数组arr中的最后一个元素\r\n          })\r\n          return {\r\n            // 这个rowspan应该据 ext的default,pay,free的长度不同来定，取最大长度\r\n            rowspan: maxLen,\r\n            colspan: 1\r\n          }\r\n        } else {\r\n          return {\r\n            rowspan: 0,\r\n            colspan: 0\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.layout {\r\n  .tab_header {\r\n    color: #333;\r\n    padding: 0 5px 0 5px;\r\n    height: 45px;\r\n    line-height: 45px;\r\n    border: 1px solid #eee;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    background: rgb(233, 225, 225);\r\n  }\r\n  .operate {\r\n    span {\r\n      font-size: 14px;\r\n      margin-right: 20px;\r\n      margin-right: 20px;\r\n      color: #409eff;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n  /* 处理多个表格共用一个表头时，表头处出现多余空行的问题 （label置空后还是占据空间问题） */\r\n  .tab-thead-style {\r\n    thead {\r\n      display: none;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}