{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'EquipmentList',\n\n  data() {\n    return {\n      currentPage: 1,\n      //默认页码为1\n      pagesize: 15,\n      //默认一页显示 条\n      dialogVisible: false,\n      dialogVisible1: false,\n      info2: {},\n      //修改数据\n      info1: {},\n      //新增数据\n      list: [],\n      adg: [],\n      uploadImgUrl: '' // 上传图片的地址\n\n    };\n  },\n\n  created() {\n    this.getEquipmentList();\n  },\n\n  methods: {\n    // 获取器械列表数据\n    getEquipmentList() {\n      axios.get('http://localhost:8080/equipmenttypeList').then(res => {\n        this.list = res.data;\n      });\n    },\n\n    // 打开添加器械框\n    addEquipment() {\n      this.dialogVisible = true;\n      this.info1 = {};\n    },\n\n    // 添加器械确认\n    addConfirm() {\n      this.$refs['addForm'].validate(valid => {\n        if (valid) {\n          axios.get('/insertEquipment', {\n            params: this.info1\n          }).then(res => {\n            if (res.data === '添加成功') {\n              this.$message.success('添加成功！');\n              this.dialogVisible = false;\n              this.getEquipmentList();\n            } else {\n              this.$message.error('添加失败！');\n            }\n          });\n        }\n      });\n    },\n\n    // 打开修改器械框\n    editEquipment(row) {\n      this.dialogVisible1 = true;\n      this.info2 = Object.assign({}, row);\n    },\n\n    // 修改器械确认\n    editConfirm() {\n      this.$refs['editForm'].validate(valid => {\n        if (valid) {\n          axios.get('/updateEquipment', {\n            params: this.info2\n          }).then(res => {\n            if (res.data === '修改成功') {\n              this.$message.success('修改成功！');\n              this.dialogVisible1 = false;\n              this.getEquipmentList();\n            } else {\n              this.$message.error('修改失败！');\n            }\n          });\n        }\n      });\n    },\n\n    // 删除器械\n    deleteEquipment(id) {\n      this.$confirm('确定要删除该器械吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        axios.get('/deleteEquipment', {\n          params: {\n            id\n          }\n        }).then(res => {\n          if (res.data === '删除成功') {\n            this.$message.success('删除成功！');\n            this.getEquipmentList();\n          } else {\n            this.$message.error('删除失败！');\n          }\n        });\n      }).catch(() => {});\n    },\n\n    // 上传之前的钩子函数\n    beforeUpload(file) {\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png') {\n        this.$message.error('文件格式错误!');\n        return false;\n      }\n\n      if (file.size / 1024 / 1024 > 2) {\n        this.$message.error('图片大小不能超过 2MB!');\n        return false;\n      }\n\n      this.uploadImgUrl = `http://localhost:8080/uploadEquipmentImg?name=${file.name}`;\n    },\n\n    // 上传成功后的钩子函数\n    handleSuccess(res) {\n      this.info1.picture = res.data.url;\n    },\n\n    // 上传之前的钩子函数\n    beforeUpload1(file) {\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png') {\n        this.$message.error('文件格式错误!');\n        return false;\n      }\n\n      if (file.size / 1024 / 1024 > 2) {\n        this.$message.error('图片大小不能超过 2MB!');\n        return false;\n      }\n\n      this.uploadImgUrl = `http://localhost:8080/uploadEquipmentImg?name=${file.name}`;\n    },\n\n    // 上传成功后的钩子函数\n    handleSuccess1(res) {\n      this.info2.picture = res.data.url;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","name","data","currentPage","pagesize","dialogVisible","dialogVisible1","info2","info1","list","adg","uploadImgUrl","created","getEquipmentList","methods","get","then","res","addEquipment","addConfirm","$refs","validate","valid","params","$message","success","error","editEquipment","row","Object","assign","editConfirm","deleteEquipment","id","$confirm","confirmButtonText","cancelButtonText","type","catch","beforeUpload","file","size","handleSuccess","picture","url","beforeUpload1","handleSuccess1"],"sourceRoot":"","sources":["D:\\Dev\\Front\\demo01\\src\\views\\Admin\\equipment.vue"],"sourcesContent":["<template>\r\n  <div class=\"equipmentList\">\r\n    <el-button type=\"primary\" @click=\"addEquipment\">添加器械</el-button>\r\n    <br /><br />\r\n    <el-table :data=\"list\" style=\"width: 100%\">\r\n      <el-table-column prop=\"id\" label=\"ID\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\r\n      <el-table-column prop=\"category\" label=\"类别\"></el-table-column>\r\n      <el-table-column prop=\"price\" label=\"价格\"></el-table-column>\r\n      <el-table-column prop=\"picture\" label=\"图片\">\r\n        <template slot-scope=\"scope\">\r\n          <img :src=\"scope.row.picture\" alt=\"\" style=\"max-height: 100px;\" />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" size=\"small\" @click=\"editEquipment(scope.row)\">编辑</el-button>\r\n          <el-button type=\"danger\" size=\"small\" @click=\"deleteEquipment(scope.row.id)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog title=\"添加器械\" :visible.sync=\"dialogVisible\" width=\"30%\">\r\n      <el-form ref=\"addForm\" :model=\"info1\" label-width=\"80px\">\r\n        <el-form-item label=\"名称\" prop=\"name\">\r\n          <el-input v-model=\"info1.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"类别\" prop=\"category\">\r\n          <el-input v-model=\"info1.category\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"价格\" prop=\"price\">\r\n          <el-input v-model=\"info1.price\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"图片\">\r\n          <el-upload\r\n            class=\"avatar-uploader\"\r\n            action=\"{{ uploadImgUrl }}\"\r\n            :show-file-list=\"false\"\r\n            :on-success=\"handleSuccess\"\r\n            :before-upload=\"beforeUpload\"\r\n          >\r\n            <img v-if=\"info1.picture\" :src=\"info1.picture\" class=\"avatar\" />\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addConfirm\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"修改器械\" :visible.sync=\"dialogVisible1\" width=\"30%\">\r\n      <el-form ref=\"editForm\" :model=\"info2\" label-width=\"80px\">\r\n        <el-form-item label=\"名称\" prop=\"name\">\r\n          <el-input v-model=\"info2.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"类别\" prop=\"category\">\r\n          <el-input v-model=\"info2.category\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"价格\" prop=\"price\">\r\n          <el-input v-model=\"info2.price\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"图片\">\r\n          <el-upload\r\n            class=\"avatar-uploader\"\r\n            action=\"{{ uploadImgUrl }}\"\r\n            :show-file-list=\"false\"\r\n            :on-success=\"handleSuccess1\"\r\n            :before-upload=\"beforeUpload1\"\r\n          >\r\n            <img v-if=\"info2.picture\" :src=\"info2.picture\" class=\"avatar\" />\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible1 = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editConfirm\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'EquipmentList',\r\n  data() {\r\n    return {\r\n      currentPage: 1, //默认页码为1\r\n      pagesize: 15, //默认一页显示 条\r\n      dialogVisible: false,\r\n      dialogVisible1: false,\r\n      info2: {}, //修改数据\r\n      info1: {}, //新增数据\r\n      list: [],\r\n      adg: [],\r\n      uploadImgUrl: '', // 上传图片的地址\r\n    }\r\n  },\r\n  created() {\r\n    this.getEquipmentList()\r\n  },\r\n  methods: {\r\n    // 获取器械列表数据\r\n    getEquipmentList() {\r\n      axios.get('http://localhost:8080/equipmenttypeList').then((res) => {\r\n        this.list = res.data\r\n      })\r\n    },\r\n\r\n    // 打开添加器械框\r\n    addEquipment() {\r\n      this.dialogVisible = true\r\n      this.info1 = {}\r\n    },\r\n\r\n    // 添加器械确认\r\n    addConfirm() {\r\n      this.$refs['addForm'].validate((valid) => {\r\n        if (valid) {\r\n          axios.get('/insertEquipment', { params: this.info1 }).then((res) => {\r\n            if (res.data === '添加成功') {\r\n              this.$message.success('添加成功！')\r\n              this.dialogVisible = false\r\n              this.getEquipmentList()\r\n            } else {\r\n              this.$message.error('添加失败！')\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    // 打开修改器械框\r\n    editEquipment(row) {\r\n      this.dialogVisible1 = true\r\n      this.info2 = Object.assign({}, row)\r\n    },\r\n\r\n    // 修改器械确认\r\n    editConfirm() {\r\n      this.$refs['editForm'].validate((valid) => {\r\n        if (valid) {\r\n          axios.get('/updateEquipment', { params: this.info2 }).then((res) => {\r\n            if (res.data === '修改成功') {\r\n              this.$message.success('修改成功！')\r\n              this.dialogVisible1 = false\r\n              this.getEquipmentList()\r\n            } else {\r\n              this.$message.error('修改失败！')\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    // 删除器械\r\n    deleteEquipment(id) {\r\n      this.$confirm('确定要删除该器械吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n      })\r\n        .then(() => {\r\n          axios.get('/deleteEquipment', { params: { id } }).then((res) => {\r\n            if (res.data === '删除成功') {\r\n              this.$message.success('删除成功！')\r\n              this.getEquipmentList()\r\n            } else {\r\n              this.$message.error('删除失败！')\r\n            }\r\n          })\r\n        })\r\n        .catch(() => {})\r\n    },\r\n\r\n    // 上传之前的钩子函数\r\n    beforeUpload(file) {\r\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png') {\r\n        this.$message.error('文件格式错误!')\r\n        return false\r\n      }\r\n      if (file.size / 1024 / 1024 > 2) {\r\n        this.$message.error('图片大小不能超过 2MB!')\r\n        return false\r\n      }\r\n      this.uploadImgUrl = `http://localhost:8080/uploadEquipmentImg?name=${file.name}`\r\n    },\r\n\r\n    // 上传成功后的钩子函数\r\n    handleSuccess(res) {\r\n      this.info1.picture = res.data.url\r\n    },\r\n\r\n    // 上传之前的钩子函数\r\n    beforeUpload1(file) {\r\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png') {\r\n        this.$message.error('文件格式错误!')\r\n        return false\r\n      }\r\n      if (file.size / 1024 / 1024 > 2) {\r\n        this.$message.error('图片大小不能超过 2MB!')\r\n        return false\r\n      }\r\n      this.uploadImgUrl = `http://localhost:8080/uploadEquipmentImg?name=${file.name}`\r\n    },\r\n\r\n    // 上传成功后的钩子函数\r\n    handleSuccess1(res) {\r\n      this.info2.picture = res.data.url\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n.equipmentList .el-table th:nth-child(5),\r\n.equipmentList .el-table td:nth-child(5) {\r\n  text-align: center;\r\n}\r\n.avatar-uploader {\r\n  display: inline-block;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 100%;\r\n  height: 150px;\r\n  display: block;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 150px;\r\n  height: 150px;\r\n  line-height: 150px;\r\n  text-align: center;\r\n  border: 1px dashed #ccc;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  transition: .3s;\r\n}\r\n.avatar-uploader-icon:hover {\r\n  color: #409EFF;\r\n  border-color: #409EFF;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}