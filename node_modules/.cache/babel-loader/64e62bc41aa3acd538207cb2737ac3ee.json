{"ast":null,"code":"import axios from 'axios';\nimport { reactive, onMounted } from 'vue';\nimport { ElButton, ElForm, ElFormItem, ElInput, ElCard } from 'element-plus';\nexport default {\n  components: {\n    ElButton,\n    ElForm,\n    ElFormItem,\n    ElInput,\n    ElCard\n  },\n\n  setup() {\n    const form = reactive({\n      username: '',\n      password: '',\n      nickname: '',\n      phone: '',\n      email: ''\n    });\n    const orders = reactive([]);\n    const favorites = reactive([]);\n\n    const getInfo = async () => {\n      try {\n        const response = await axios.get('/api/user/info');\n        const {\n          username,\n          nickname,\n          phone,\n          email\n        } = response.data;\n        form.username = username;\n        form.nickname = nickname;\n        form.phone = phone;\n        form.email = email;\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    const getOrders = async () => {\n      try {\n        const response = await axios.get('/api/user/orders');\n        orders.splice(0, orders.length, ...response.data);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    const getFavorites = async () => {\n      try {\n        const response = await axios.get('/api/user/favorites');\n        favorites.splice(0, favorites.length, ...response.data);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    const updateInfo = async () => {\n      try {\n        await axios.put('/api/user/info', form);\n        alert('个人信息已更新！');\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    const deleteFavorite = async item => {\n      try {\n        const response = await axios.delete(`/api/user/favorites/${item.id}`);\n\n        if (response.status === 200) {\n          favorites.splice(favorites.indexOf(item), 1);\n          alert('删除成功！');\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    onMounted(() => {\n      getInfo();\n      getOrders();\n      getFavorites();\n    });\n    return {\n      form,\n      orders,\n      favorites,\n      updateInfo,\n      deleteFavorite\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["axios","reactive","onMounted","ElButton","ElForm","ElFormItem","ElInput","ElCard","components","setup","form","username","password","nickname","phone","email","orders","favorites","getInfo","response","get","data","error","console","getOrders","splice","length","getFavorites","updateInfo","put","alert","deleteFavorite","item","delete","id","status","indexOf"],"sourceRoot":"","sources":["D:\\Dev\\Front\\demo01\\src\\views\\User\\personal.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"info-card\">\r\n      <el-card>\r\n        <div class=\"header\">个人信息</div>\r\n        <div class=\"content\">\r\n          <el-form :model=\"form\" label-position=\"left\" label-width=\"100px\">\r\n            <el-form-item label=\"用户名\">\r\n              <el-input v-model=\"form.username\" disabled></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"密码\">\r\n              <el-input v-model=\"form.password\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"昵称\">\r\n              <el-input v-model=\"form.nickname\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"联系电话\">\r\n              <el-input v-model=\"form.phone\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"电子邮件\">\r\n              <el-input v-model=\"form.email\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"updateInfo\">保存</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { reactive, onMounted } from 'vue';\r\nimport { ElButton,  ElForm, ElFormItem, ElInput,  ElCard } from 'element-plus';\r\n\r\nexport default {\r\n  components: {\r\n    ElButton,\r\n    ElForm,\r\n    ElFormItem,\r\n    ElInput,\r\n    ElCard\r\n  },\r\n  setup() {\r\n    const form = reactive({\r\n      username: '',\r\n      password: '',\r\n      nickname: '',\r\n      phone: '',\r\n      email: ''\r\n    });\r\n\r\n    const orders = reactive([]);\r\n    const favorites = reactive([]);\r\n\r\n    const getInfo = async () => {\r\n      try {\r\n        const response = await axios.get('/api/user/info');\r\n        const { username, nickname, phone, email } = response.data;\r\n        form.username = username;\r\n        form.nickname = nickname;\r\n        form.phone = phone;\r\n        form.email = email;\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    const getOrders = async () => {\r\n      try {\r\n        const response = await axios.get('/api/user/orders');\r\n        orders.splice(0, orders.length, ...response.data);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    const getFavorites = async () => {\r\n      try {\r\n        const response = await axios.get('/api/user/favorites');\r\n        favorites.splice(0, favorites.length, ...response.data);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    const updateInfo = async () => {\r\n      try {\r\n        await axios.put('/api/user/info', form);\r\n        alert('个人信息已更新！');\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    const deleteFavorite = async (item) => {\r\n      try {\r\n        const response = await axios.delete(`/api/user/favorites/${item.id}`);\r\n        if (response.status === 200) {\r\n          favorites.splice(favorites.indexOf(item), 1);\r\n          alert('删除成功！');\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    onMounted(() => {\r\n      getInfo();\r\n      getOrders();\r\n      getFavorites();\r\n    });\r\n\r\n    return {\r\n      form,\r\n      orders,\r\n      favorites,\r\n      updateInfo,\r\n      deleteFavorite\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.info-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n\r\n\r\n.favorites .price {\r\n  font-size: 16px;\r\n  color: #ff0000;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.favorites .actions {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}